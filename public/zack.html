<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zacks Analysis / AnÃ¡lise Zacks</title>
  <!-- External CSS (kept asâ€‘is) -->
  <link rel="stylesheet" href="app-zack.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="app-mah.css">
  <!-- Minimal inline CSS for the language switcher (rest lives in external files) -->
  <style>
    .lang-switcher{margin-left:1rem;font-size:.9rem;}
    .lang-switcher button{background:none;border:none;cursor:pointer;padding:0 .4rem;}
    .lang-switcher button.active{font-weight:700;text-decoration:underline;}
  </style>
</head>
<body>
  <!-- Primary navbar (unchanged except for language switcher) -->
  <header class="mah-navbar">
    <div class="mah-inner">
      <button id="burger" class="burger">â˜°</button>
      <a href="/" class="mah-brand"><span class="mah-icon">ğŸ“ˆ</span><span class="hero-title mah-name">Market Analytics Hub</span></a>
      <nav class="mah-nav">
        <a href="https://marketanalyticshubapp.azurewebsites.net/#home" class="mah-link active">Home</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#features" class="mah-link">Features</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#team" class="mah-link">Team</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#pricing" class="mah-link">Pricing</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#faq" class="mah-link">FAQ</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#contact" class="mah-link">Contact Us</a>
        <a href="https://marketanalyticshubapp.azurewebsites.net/#help" class="mah-link">Help Center</a>
        <a href="https://nova-search-stock.netlify.app/sim.html" class="mah-link">Simulate Strategy</a>
      </nav>
      <a href="https://marketanalyticshubapp.azurewebsites.net/Account/Login" target="_blank" rel="noopener" class="mah-cta"><span class="mah-cta-icon">â†»</span> Login/Register</a>
      <!-- PT | EN toggle -->
      <div class="lang-switcher" id="langSwitcher">
        <button data-lang="pt" class="active">PT</button>|
        <button data-lang="en">EN</button>
      </div>
    </div>
  </header>

  <!-- Secondary navbar (unchanged) -->
  <header class="mah-navbar">
    <div class="mah-inner">
      <nav class="mah-nav">
        <a href="index.html" class="mah-link">Home</a>
        <a href="zack.html" class="mah-link active">Zacks Analysis</a>
        <a href="stocks.html" class="mah-link">Stocks List</a>
      </nav>
    </div>
  </header>

  <!-- Page heading -->
  <div class="header">
    <h2 id="mainTitle">ğŸ“ˆ AnÃ¡lise Zacks</h2>
    <p id="subTitle">AnÃ¡lise profissional de aÃ§Ãµes baseada no framework Zacks</p>
  </div>

  <!-- Spinner overlay -->
  <div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div></div>

  <!-- Core content -->
  <div class="container">
    <div class="content">
      <div class="input-section">
        <div class="form-group">
          <label for="ticker" id="tickerLabel">ğŸ¯ Ticker da AÃ§Ã£o</label>
          <div class="input-wrapper">
            <input type="text" id="ticker" placeholder="Digite o ticker (ex: AAPL, TSLA, VALE)" />
            <button class="analyze-btn" id="analyzeBtn"><span class="spinner" id="spinner"></span><span id="btnText">Analisar</span></button>
          </div>
        </div>
      </div>
      <div class="results" id="results">
        <div class="results-header"><h2 id="resultsHeader">ğŸ“Š Resultados da AnÃ¡lise</h2></div>
        <div class="results-content">
          <div class="metrics-grid">
            <div class="metric-card"><div class="metric-label" id="lblPrice">ğŸ’° PreÃ§o Atual</div><div class="metric-value" id="price">-</div></div>
            <div class="metric-card"><div class="metric-label" id="lblChange">ğŸ“ˆ VariaÃ§Ã£o %</div><div class="metric-value" id="changePercent">-</div></div>
            <div class="metric-card"><div class="metric-label" id="lblVolume">ğŸ“Š Volume</div><div class="metric-value" id="volume">-</div></div>
            <div class="metric-card"><div class="metric-label" id="lblMarketCap">ğŸ¢ Market Cap</div><div class="metric-value" id="marketCap">-</div></div>
            <div class="metric-card"><div class="metric-label" id="lblFPE">ğŸ”® PE (Forward)</div><div class="metric-value" id="forwardPE">-</div></div>
            <div class="metric-card"><div class="metric-label" id="lblFSales">ğŸ’¼ Sales (Forward)</div><div class="metric-value" id="forwardSales">-</div></div>
          </div>
          <div class="zacks-rank" id="zacksRankCard">
            <div class="rank-number" id="zacksRank">-</div>
            <div class="rank-title" id="rankTitle">Zacks Rank</div>
            <div class="rank-description" id="rankExplanation">-</div>
          </div>
          <div class="valuation">
            <h3 id="valuationHeading">ğŸ¯ AnÃ¡lise de Valuation</h3>
            <div class="valuation-text" id="valuation">-</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Translation + initialization script -->
  <script>
    // 1. Translation dictionary
    const t9n={
      pt:{
        mainTitle:"ğŸ“ˆ AnÃ¡lise Zacks",
        subTitle:"AnÃ¡lise profissional de aÃ§Ãµes baseada no framework Zacks",
        tickerLabel:"ğŸ¯ Ticker da AÃ§Ã£o",
        tickerPlaceholder:"Digite o ticker (ex: AAPL, TSLA, VALE)",
        analyzeBtn:"Analisar",
        resultsHeader:"ğŸ“Š Resultados da AnÃ¡lise",
        metrics:{price:"ğŸ’° PreÃ§o Atual",change:"ğŸ“ˆ VariaÃ§Ã£o %",volume:"ğŸ“Š Volume",mcap:"ğŸ¢ Market Cap",fpe:"ğŸ”® PE (Forward)",fsales:"ğŸ’¼ Sales (Forward)"},
        zacksRank:"Zacks Rank",
        valuationHeading:"ğŸ¯ AnÃ¡lise de Valuation"
      },
      en:{
        mainTitle:"ğŸ“ˆ Zacks Analysis",
        subTitle:"Professional stock analysis based on the Zacks framework",
        tickerLabel:"ğŸ¯ Stock Ticker",
        tickerPlaceholder:"Enter ticker (e.g. AAPL, TSLA, VALE)",
        analyzeBtn:"Analyze",
        resultsHeader:"ğŸ“Š Analysis Results",
        metrics:{price:"ğŸ’° Current Price",change:"ğŸ“ˆ Change %",volume:"ğŸ“Š Volume",mcap:"ğŸ¢ Market Cap",fpe:"ğŸ”® Forward P/E",fsales:"ğŸ’¼ Forward Sales"},
        zacksRank:"Zacks Rank",
        valuationHeading:"ğŸ¯ Valuation Analysis"
      }
    };

    // 2. State helpers
    let currentLang=localStorage.getItem("lang")||"pt";
    const qs=s=>document.querySelector(s);

    function setLang(lang){
      currentLang=lang;localStorage.setItem("lang",lang);document.documentElement.lang=lang;applyT9n();
      document.querySelectorAll("#langSwitcher button").forEach(b=>b.classList.toggle("active",b.dataset.lang===lang));
    }

    // 3. Inject translations
    function applyT9n(){
      const t=t9n[currentLang];
      qs("#mainTitle").textContent=t.mainTitle;
      qs("#subTitle").textContent=t.subTitle;
      qs("#tickerLabel").textContent=t.tickerLabel;
      qs("#ticker").placeholder=t.tickerPlaceholder;
      qs("#btnText").textContent=t.analyzeBtn;
      qs("#resultsHeader").textContent=t.resultsHeader;
      qs("#lblPrice").textContent=t.metrics.price;
      qs("#lblChange").textContent=t.metrics.change;
      qs("#lblVolume").textContent=t.metrics.volume;
      qs("#lblMarketCap").textContent=t.metrics.mcap;
      qs("#lblFPE").textContent=t.metrics.fpe;
      qs("#lblFSales").textContent=t.metrics.fsales;
      qs("#rankTitle").textContent=t.zacksRank;
      qs("#valuationHeading").textContent=t.valuationHeading;
    }

    // 4. Setup language switcher once DOM is ready
    document.addEventListener("DOMContentLoaded",()=>{
      // hook lang buttons
      document.querySelectorAll("#langSwitcher button").forEach(btn=>btn.addEventListener("click",()=>setLang(btn.dataset.lang)));
      setLang(currentLang);
    });
  </script>

  <!-- Your existing business logic (must run after translation init) -->
  <script src="app-zack.js"></script>
</body>
</html>
