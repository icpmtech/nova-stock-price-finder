<!DOCTYPE html><html lang="pt-PT">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nova Stocks Neon</title>
  <style>
    :root {
      --primary: #0078D4;
      --accent: #00f0ff;
      --bg-dark: #0f0f0f;
      --text: #fff;
      --gray: #444;
    }* {
  box-sizing: border-box;
  font-family: 'Segoe UI', sans-serif;
}

body {
  background: linear-gradient(135deg, var(--bg-dark), #1a1a1a);
  color: var(--text);
  padding: 2rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

h1, h2 {
  margin: 1rem 0;
  color: var(--accent);
  text-shadow: 0 0 6px var(--accent);
}

form, .search-container {
  background: #1A1A1A;
  border: 2px solid var(--primary);
  border-radius: 16px;
  padding: 1rem;
  width: 100%;
  max-width: 700px;
  box-shadow: 0 0 15px var(--primary);
  margin-bottom: 2rem;
}

label {
  display: block;
  margin-top: 1rem;
  font-weight: 600;
}

input, select, textarea {
  width: 100%;
  padding: 1rem;
  margin-top: 0.3rem;
  background: #111;
  border: 1px solid #333;
  border-radius: 12px;
  color: white;
  font-size: 1rem;
}

button {
  margin-top: 1.5rem;
  width: 100%;
  background: linear-gradient(90deg, #ff0050, var(--primary));
  color: white;
  padding: 1rem;
  font-size: 1.1rem;
  font-weight: bold;
  border: none;
  border-radius: 30px;
  cursor: pointer;
}

.badge {
  background: var(--gray);
  color: #ccc;
  font-size: 0.75rem;
  padding: 0.3rem 0.6rem;
  border-radius: 6px;
  margin-left: 0.5rem;
}

.results {
  list-style: none;
  padding: 0;
  margin-top: 0.5rem;
  background-color: #111;
  border-radius: 12px;
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.6);
  max-height: 300px;
  overflow-y: auto;
}

.results li {
  padding: 1rem;
  border-bottom: 1px solid var(--gray);
  cursor: pointer;
}

.results li:hover {
  background-color: #2a2a2a;
}

.card {
  background: #1a1a1a;
  border-left: 5px solid var(--primary);
  padding: 1rem;
  margin-bottom: 1rem;
  border-radius: 10px;
  width: 100%;
  max-width: 700px;
}

@media (min-width: 1024px) {
  .card-list { display: none; }
  table {
    width: 100%;
    max-width: 1000px;
    margin-top: 2rem;
    border-collapse: collapse;
    background: #1a1a1a;
  }

  th, td {
    padding: 1rem;
    text-align: center;
    border-bottom: 1px solid #333;
  }

  th {
    background: var(--primary);
    color: #fff;
  }
}

  </style>
    <link rel="stylesheet" href="nav.css">
</head>
<body>
   <!-- Header with Navigation Menu -->
    <header class="header">
      <div class="logo-title">
         <h1>üîç Nova Stock Search + Registo</h1> 
        <p>Pesquisa e Registo de A√ß√µes</p>
      <nav class="main-nav">
        <ul>
          <li><a href="index.html" class="active">Home</a></li>
          <li><a href="zack.html">Zack Analisys</a></li>
          <li><a href="stocks.html">Stocks List</a></li>
          <li><a href="stocks.html">Stock Analysis Tool</a></li>
          <li><a href="#about">About</a></li>
        </ul>
      </nav>
    </header>
  <div class="search-container">
    <label>Pesquisar A√ß√£o:
      <input type="text" id="searchInput" placeholder="Escreve o nome ou s√≠mbolo da a√ß√£o..." autocomplete="off"/>
    </label>
    <ul id="results" class="results"></ul>
  </div>  <form id="stockForm">
    <label>Ticker <input type="text" id="ticker" required readonly></label>
    <label>Tipo
      <select id="tipo">
        <option value="Compra">üü¢ Compra</option>
        <option value="Venda">üî¥ Venda</option>
      </select>
    </label>
    <label>Quantidade <input type="number" id="quantidade" min="1" required></label>
    <label>Pre√ßo (‚Ç¨) <input type="number" id="preco" step="0.01" required></label>
    <label>Comiss√£o (‚Ç¨) <input type="number" id="comissao" step="0.01" required></label>
    <label>Data <input type="date" id="data" required></label>
    <label>Ind√∫stria <input type="text" id="industria" required></label>
    <label>Observa√ß√µes <textarea id="obs" rows="2"></textarea></label>
    <button type="submit">üíæ Guardar Registo</button>
  </form>  <h2>üìë Hist√≥rico</h2>
  <div id="cardsContainer"></div>  <script>
    const searchInput = document.getElementById('searchInput');
    const resultsList = document.getElementById('results');
    const tickerField = document.getElementById('ticker');

    async function fetchSuggestions(query) {
      const res = await fetch(`/api/index?query=${encodeURIComponent(query)}`);
      if (!res.ok) return [];
      return await res.json();
    }

    function renderResults(suggestions) {
      resultsList.innerHTML = '';
      suggestions.forEach(stock => {
        const li = document.createElement('li');
        li.innerHTML = `<strong>${stock.symbol}</strong> ‚Äî ${stock.name}<span class="badge">${stock.exchange}</span>`;
        li.onclick = () => {
          tickerField.value = stock.symbol;
          searchInput.value = `${stock.name} (${stock.symbol})`;
          resultsList.innerHTML = '';
        };
        resultsList.appendChild(li);
      });
    }

    let debounceTimer;
    searchInput.addEventListener('input', () => {
      const query = searchInput.value.trim();
      clearTimeout(debounceTimer);
      if (query.length < 2) {
        resultsList.innerHTML = '';
        return;
      }
      debounceTimer = setTimeout(async () => {
        const results = await fetchSuggestions(query);
        renderResults(results);
      }, 300);
    });

    const form = document.getElementById('stockForm');
    const cardsContainer = document.getElementById('cardsContainer');

    function loadRegistos() {
      const registos = JSON.parse(localStorage.getItem('registos') || '[]');
      cardsContainer.innerHTML = '';
      registos.forEach(reg => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div><strong>${reg.ticker}</strong> ‚Äî ${reg.tipo}</div>
          <div><strong>Qtd:</strong> ${reg.quantidade}</div>
          <div><strong>Pre√ßo:</strong> ‚Ç¨${parseFloat(reg.preco).toFixed(2)}</div>
          <div><strong>Comiss√£o:</strong> ‚Ç¨${parseFloat(reg.comissao).toFixed(2)}</div>
          <div><strong>Data:</strong> ${reg.data}</div>
          <div><strong>Ind√∫stria:</strong> ${reg.industria}</div>
          ${reg.obs ? `<div><strong>Obs:</strong> ${reg.obs}</div>` : ''}
        `;
        cardsContainer.appendChild(card);
      });
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const reg = {
        ticker: document.getElementById('ticker').value,
        tipo: document.getElementById('tipo').value,
        quantidade: parseInt(document.getElementById('quantidade').value),
        preco: parseFloat(document.getElementById('preco').value),
        comissao: parseFloat(document.getElementById('comissao').value),
        data: document.getElementById('data').value,
        industria: document.getElementById('industria').value,
        obs: document.getElementById('obs').value
      };
      const registos = JSON.parse(localStorage.getItem('registos') || '[]');
      registos.push(reg);
      localStorage.setItem('registos', JSON.stringify(registos));
      form.reset();
      tickerField.value = '';
      searchInput.value = '';
      loadRegistos();
    });

    loadRegistos();
  </script></body>
</html>
